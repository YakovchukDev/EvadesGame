using UnityEngine;

namespace GamePlay.Character.Spell.Nexus
{
    public class InvulnerabilityFieldController : MonoBehaviour
    {
        [SerializeField] private GameObject _invulnerableField;
        private float _timer = 3;

        void Update()
        {
            if (_invulnerableField.activeSelf)
            {
                _timer -= Time.deltaTime;
                if (_timer <= 0)
                {
                    _invulnerableField.SetActive(false);
                    gameObject.layer = 6;
                    _invulnerableField.transform.position = transform.position;
                    _timer = 3;
                }
            }
        }

        private void OnTriggerStay(Collider other)
        {
            if (other.CompareTag("Invulnerable"))
            {
                gameObject.layer = 11;
            }
        }

        private void OnTriggerExit(Collider other)
        {
            if (other.CompareTag("Invulnerable"))
            {
                gameObject.layer = 6;
            }
        }
    }
}